# 1장. Apache Airflow 살펴보기
- 데이터 파이프라인은 방향성 비순환 그래프 DAG(Directed Acyclic Graph) 로 구성.
- 구성된 Task를 병렬 처리. **배치 지향 데이터 파이프라인**
	- 파이프라인을 작은 점진적인 task로 명확하게 분리할 수 있음. 
	-> 실패한 task에 대해서만 재수행이 가능하기에 더 효율적 구성 가능

**Workflow Manager 비교**

|이름|워크플로 정의|스케줄관리|백필|UI|플랫폼설치|수평확장|
|------|---|---|---|---|---|---|
|Airflow|Python|예|예|예|Anywhere|예|
|Argo|Yaml|3rd party||예|k8s|예|
|Nifi|UI|예|아니오|예|Anywhere|예|
|Oozie|XML|예|예|예|Hadoop|예|


** 백필(Backfilling) : 하나의 flow를 특정 옵션(기간) 기준으로 다시 실행할 수 있는 기능.
task가 며칠 동안 실패하거나 새롭게 만든 플로를 과거의 특정 시점부터 순차적으로 실행하고 싶을 때 수행

**Airflow 스케줄러**
1. 사용자가 DAG 워크플로우 작성하면, 스케줄러는 DAG파일 분석 후 task, 의존성 및 예약 주기 확인
2. DAG 예약 주기가 현재 시간 이전이면 실행되도록 예약
3. 예약된 task의 의존성을 확인 후 완료되지 않았다면 실행 대기열에 추가

- 스케줄 주기와 백필 개념을 결합하여 스케줄 주기를 더욱 강력하게 활용
	- 새로 생성한 DAG를 과거 시점 및 기간에 대해 실행이 가능


### Airflow 선택해야 하는 이유
- 파이썬 코드를 이용해 파이프라인 구현.
- 쉽게 확장 가능하고 다양한 시스템과 통합이 가능. (다양한 DB, Cloud Service 와 통합 가능)
- 스케줄링 기법은 정기적인 배치 실행, 점진적 처리를 통해 효율적인 파이프라인 구축 가능.
- 백필 기능을 사용하여 과거데이터 손쉽게 재처리 가능.
- Airflow는 좋은 웹 인터페이스를 제공 -> 모니터링 및 오류 디버깅 가능
- 오픈소스!

### Airflow 가 적합하지 않은 경우
- 배치 task기능에 초점이 맞춰져 있어 실시간 데이터 처리에 적합하지 않음
- 추가 및 삭제 task가 빈번한 동적 파이프라인의 경우 적합하지 않음
  - 가장 최근 실행 버전에 대한 정의만 표현해 주기 떄문에 실행되는 동안 구조가 변경되지 않는 파이프라인에 적합
- Python으로 개발하기 때문에 엄격한 관리 및 프로그래밍 능력이 필요함


